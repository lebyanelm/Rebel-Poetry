{"version":3,"sources":["logo.svg","providers/SessionContext.js","providers/BacklightContext.js","components/AccountDropdownOptions/AccountDropdownOptions.js","components/Header/Header.js","components/PoemPostInput/PoemPostInput.js","services/Poem.js","components/Poem/Poem.js","components/PoemsList/PoemsList.js","services/Storage.js","providers/StorageContext.js","components/Loader/Loader.js","providers/LoaderContext.js","components/Toast/Toast.js","providers/ToastContext.js","pages/HomePage/HomePage.js","pages/NotFoundPage/NotFoundPage.js","components/Poet/Poet.js","pages/PoetsPage/PoetsPage.js","pages/PoetProfile/PoetProfile.js","components/PoemPageHeader/PoemPageHeader.js","pages/PoemPage/PoemPage.js","pages/SearchPage/SearchPage.js","components/Footer/Footer.js","pages/SignUpPage/SignUpPage.js","pages/SignInPage/SignInPage.js","pages/DraftsPage/DraftsPage.js","pages/FeelingLuckyPage/FeelingLuckyPage.js","components/RootWrapper/RootWrapper.js","components/DraftPreview/DraftPreview.js","pages/NewPoem/NewPoem.js","App.js","reportWebVitals.js","index.js","pages/PoetProfile/PoetProfile.module.scss","pages/PoemPage/PoemPage.module.scss","components/Footer/Footer.module.scss","components/PoemPageHeader/PoemPageHeader.module.scss","pages/NewPoem/NewPoem.module.scss","components/PoemPostInput/PoemPostInput.module.scss","components/DraftPreview/DraftPreview.module.scss","components/Poem/Poem.module.scss","components/Header/Header.module.css","components/Loader/Loader.module.scss","pages/SearchPage/SearchPage.module.scss","components/Poet/Poet.module.scss","components/Toast/Toast.module.scss","components/PoemsList/PoemsList.module.scss","pages/NotFoundPage/NotFoundPage.module.scss","pages/PoetsPage/PoetsPage.module.scss"],"names":["SessionContext","React","createContext","SessionContextProvider","children","useState","userSession","setUserSession","Provider","value","useSession","useContext","BacklightContext","BacklightContextProvider","state","handler","isBacklightVisible","setIsBacklightVisible","className","style","display","onClick","AccountDropdownOptions","location","isOptionsOpen","setIsOptionsOpen","toggleOptions","pathname","join","marginRight","backgroundImage","display_photo","display_name","marginLeft","transform","name","to","defaultProps","Header","useLocation","styles","HeaderContainer","href","target","rel","Banner","HeaderBrandLogo","src","Logo","alt","includes","Component","PoemService","getPoemData","pId","Promise","resolve","reject","superagent","process","REACT_APP_API_ENDPOINT","end","_","response","respond","getPoemAuthors","authorIds","console","log","getUnauthenticatedFeed","updateDraft","data","token","send","set","getDraft","did","uploadThumbnail","file","attach","publish","tags","split","is_anonymous","statusCode","body","reason","Poem","description","isDraft","poemAuthors","setPoemAuthors","useEffect","undefined","author","featured_poets","then","poets","username","thumbnail","PoemContents","PoemTitle","_id","title","PoemAuthor","length","PoemSnapshot","slice","PoemsList","feed","isDrafts","PoemsGrid","map","poem","Storage","constructor","String","Array","Object","JSON","stringify","toString","localStorage","setItem","error","removeItem","StorageContext","StorageContextProvider","getItem","userToken","setUserToken","useStorage","Loader","width","height","viewBox","fill","xmlns","FirstCircle","d","BlendGroup","SecondCircle","x","rx","LoaderContext","LoaderContextProvider","isLoaderVisible","setIsLoaderVisible","useLoaderState","Toast","text","isShowClose","closeToast","CloseButton","ToastContext","ToastContextProvider","toastText","setToastText","setIsShowClose","showToast","duration","setTimeout","useToast","HomePage","setFeed","document","poems","Fragment","NotFoundPage","Poet","poet","PoetAvatar","PoetName","PoetsPage","rebbels","setRebbels","pages","setPages","router","useHistory","defaultParams","qs","parse","search","ignoreQueryPrefix","queryParameters","setQueryParameters","responseError","setResponseError","getRebbelPoets","useCallback","index","updatePagesCount","total_count","totalCount","pIndexes","pIndex","push","Poets","textAlign","fontSize","color","userSelect","pageNumber","PoetProfile","params","useParams","profileData","setProfileData","getProfileData","ProfilePage","ProfileAvatarContainer","ProfileAvatar","PageContents","ProfileName","Name","ProfleVerificationSign","ProfileBiography","biography","ProfileBiographyEditButton","ProfileHeaderButtons","ProfileStats","followers","follows","PoetProfileContents","poemId","PoemPageHeader","poemData","BackgroundDiffuser","PoemInformationContainer","PoemThumbnailImage","PlayPauseButton","PoemDetailsContainer","PoemMetadataItems","read_time","time_created","day","PoemStats","PoemPage","poemTextContainer","useRef","scrollButtonsContainer","annotationPosition","annotationContainer","setPoemData","status","windowScrollListener","window","addEventListener","event","scrollY","poemContentRect","current","getBoundingClientRect","y","position","top","bottom","opacity","removeEventListener","PoemPageContainer","PoemSplitSides","SideButtons","ref","views_count","Bookmark","bookmarks_count","Heart","likes_count","Share","shares_count","PoemTextContainer","AnnotationsContainer","translate","PoemTags","RecommendedPoems","SearchPage","setSearchValue","results","setResults","PageTitle","SearchInputContainer","LargeSearchInput","type","placeholder","onKeyUp","SearchButton","Footer","LeftSection","BrandName","Legal","FirstMiddleSection","SectionName","SecondMiddleSection","Attribution","SignUpPage","email_address","password","requestData","setRequestData","onInputKeyup","onSubmit","preventDefault","ResponseError","SignInPage","signInData","setSignInData","action","credentialsData","btoa","alert","DraftsPage","drafts","setDrafts","storage","FeelingLuckyPage","history","isError","setIsError","marginBottom","RootWrapper","DraftPreview","isPublished","setDraftPreviewContainer","tagsInput","createRef","draftContainer","getElementById","innerWidth","id","DraftTitle","DraftSplitSides","DraftContents","plugins","remarkGfm","DraftAnnotations","BottomButtons","disabled","toUpperCase","NewPoem","isPreviewOpen","setIsPreviewOpen","Date","toISOString","is_created","draftData","setDraftData","nanoid","draft_id","draft","catch","onFieldChange","ev","changes","imageInputRef","PageContainer","isOpen","onRequestClose","overlay","zIndex","content","margin","borderRadius","border","NewPoemHeaderContainer","NewPoemImageContainer","onChange","files","fileReader","FileReader","onloadend","result","readAsDataURL","large","accept","hidden","NewPoemImageSelector","click","NewPoemDetails","NewPoemTitle","autoFocus","rows","referrerPolicy","NewPoemContentsContainer","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.0e58c294.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6597611f.svg\";","import React from \"react\";\n\n// Session Context\nconst SessionContext = React.createContext({});\n\n// Session Context Provider\nconst SessionContextProvider = ({ children }) => {\n  const [userSession, setUserSession] = React.useState();\n\n  return (\n    <SessionContext.Provider value={{ userSession, setUserSession }}>\n      {children}\n    </SessionContext.Provider>\n  );\n};\n\n// Session Context Consumer\nconst useSession = () => {\n  const context = React.useContext(SessionContext);\n  return context;\n};\n\nexport { SessionContextProvider, useSession, SessionContext };\n","import React from \"react\";\n\n// Session Context\nconst BacklightContext = React.createContext({});\n\n// Session Context Provider\nconst BacklightContextProvider = ({ children }) => {\n  const [isBacklightVisible, setIsBacklightVisible] = React.useState({\n    state: false,\n    handler: () => null,\n  });\n\n  return (\n    <>\n      <div\n        className=\"backlight\"\n        style={{ display: isBacklightVisible.state ? \"block\" : \"none\" }}\n        onClick={() => {\n          setIsBacklightVisible({ state: false, handler: () => null });\n          isBacklightVisible.handler();\n        }}\n      ></div>\n      <BacklightContext.Provider\n        value={{ isBacklightVisible, setIsBacklightVisible }}\n      >\n        {children}\n      </BacklightContext.Provider>\n    </>\n  );\n};\n\n// Session Context Consumer\nconst useBacklight = () => {\n  const context = React.useContext(BacklightContext);\n  return context;\n};\n\nexport { BacklightContextProvider, useBacklight, BacklightContext };\n","import React from \"react\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { Link } from \"react-router-dom\";\nimport { useBacklight } from \"../../providers/BacklightContext\";\n\nconst AccountDropdownOptions = ({ userSession, location }) => {\n  const [isOptionsOpen, setIsOptionsOpen] = React.useState(false);\n  const { setIsBacklightVisible } = useBacklight();\n\n  const showOptions = () => setIsOptionsOpen(true);\n  const hideOptions = () => setIsOptionsOpen(false);\n  const toggleOptions = () => {\n    if (isOptionsOpen) hideOptions();\n    else showOptions();\n    setIsBacklightVisible({\n      state: !isOptionsOpen,\n      handler: () => {\n        setIsOptionsOpen(false);\n      },\n    });\n  };\n\n  return (\n    <>\n      <div className=\"dropdown-options-backlight\"></div>\n      <div className=\"clickable\">\n        <div\n          className={[\n            \"navigation-item dropdown flex\",\n            location.pathname === \"/sign_in\" || location.pathname === \"/sign_up\"\n              ? \"active\"\n              : \"inactive\",\n          ].join(\" \")}\n        >\n          <section onClick={() => toggleOptions()}>\n            <div\n              className=\"avatar small-avatar\"\n              style={{\n                marginRight: \"5px\",\n                backgroundImage: `url(${userSession.display_photo})`,\n              }}\n            ></div>\n            <span>{userSession?.display_name}</span>\n            <IonIcon\n              style={{ marginLeft: \"5px\", transform: \"translateY(2px)\" }}\n              name=\"chevron-down\"\n            ></IonIcon>\n          </section>\n\n          <div\n            className=\"dropdown-options\"\n            style={{ display: isOptionsOpen ? \"block\" : \"none\" }}\n          >\n            <section>\n              <Link to=\"/poet/me\">\n                Signed in as <b>{userSession?.display_name}</b>\n              </Link>\n            </section>\n            <section>\n              <Link to=\"/poet/me\">Your Public Poems</Link>\n              <Link to=\"\">Your Anonymous Poems</Link>\n              <Link to=\"\">Your Bookmarked poems</Link>\n              <Link to=\"\">Your Collaborations and Features</Link>\n              <Link to=\"\">Your Unpublished Drafts</Link>\n              <Link to=\"\">Your Notifications</Link>\n            </section>\n            <section>\n              <Link className=\"\" to=\"\">\n                Edit your profile\n              </Link>\n              <Link className=\"danger\" to=\"\">\n                Sign out\n              </Link>\n            </section>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nAccountDropdownOptions.propTypes = {};\n\nAccountDropdownOptions.defaultProps = {};\n\nexport default AccountDropdownOptions;\n","import React from \"react\";\nimport Logo from \"../../logo.svg\";\nimport styles from \"./Header.module.css\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport AccountDropdownOptions from \"../AccountDropdownOptions/AccountDropdownOptions\";\n\nconst Header = () => {\n  const location = useLocation();\n  const { userSession } = useSession();\n\n  return (\n    <div className={styles.HeaderContainer}>\n      {/* BANNER */}\n      <a\n        href=\"https://patreon.com/@rebelpoetry\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className={styles.Banner}\n      >\n        We need your support to keep the site functional and available &mdash;\n        Become a contributor\n        <IonIcon name=\"arrow-forward\"></IonIcon>\n      </a>\n\n      {/* HEADER CONTENTS */}\n      <div className={styles.Header}>\n        <Link to=\"/\" className={styles.HeaderBrandLogo}>\n          <img src={Logo} alt=\"\" />\n        </Link>\n        <section>\n          {userSession && (\n            <Link to=\"/new_poem\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/new_poem\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Publish New\n              </div>\n            </Link>\n          )}\n          <Link to=\"/discover\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/discover\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Discover\n            </div>\n          </Link>\n          <Link to=\"/rebbels\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname.includes(\"/rebels\") ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Rebbel Poets\n            </div>\n          </Link>\n\n          {/* Only when there's a session */}\n          {userSession && (\n            <Link to=\"/your_drafts\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/your_drafts\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Your Drafts\n              </div>\n            </Link>\n          )}\n\n          <Link to=\"/feeling_lucky\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/feeling_lucky\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Feeling Lucky\n            </div>\n          </Link>\n          <Link to=\"/search\">\n            <div\n              className={[\n                \"navigation-item\",\n                location.pathname === \"/search\" ? \"active\" : \"inactive\",\n              ].join(\" \")}\n            >\n              Search\n            </div>\n          </Link>\n        </section>\n\n        <div className=\"flex-space\"></div>\n\n        <section>\n          {!userSession && (\n            <Link to=\"/sign_up\">\n              <div className=\"navigation-item button\">Become a Rebbel</div>\n            </Link>\n          )}\n\n          {/* For members this will be shown */}\n          {userSession && (\n            <AccountDropdownOptions\n              userSession={userSession}\n              location={location}\n            ></AccountDropdownOptions>\n          )}\n\n          {/* For non-logged in members */}\n          {!userSession && (\n            <Link to=\"/sign_in\">\n              <div\n                className={[\n                  \"navigation-item\",\n                  location.pathname === \"/sign_in\" ? \"active\" : \"inactive\",\n                ].join(\" \")}\n              >\n                Sign In\n              </div>\n            </Link>\n          )}\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React, { Component } from \"react\";\nimport styles from \"./PoemPostInput.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { BeatLoader } from \"react-spinners\";\n\nclass PoemPostInput extends Component {\n  state = {\n    isAnonymousPublish: false,\n  };\n\n  toggleIdentity = () => {\n    this.setState({ isAnonymousPublish: !this.state.isAnonymousPublish });\n  };\n\n  render() {\n    return (\n      <div className={styles.PoemInputContainer}>\n        <input\n          className={styles.PoemInputTitle}\n          placeholder=\"Type a poem title here...\"\n        />\n        <textarea\n          className={styles.PoemInput}\n          placeholder=\"Craft your poem in this space, resize height if needed.\"\n        ></textarea>\n\n        <br />\n        <br />\n        <input\n          type=\"text\"\n          className={styles.PoemTagsInput}\n          placeholder=\"Type comma-separated tags of the poem (Optional)\"\n        />\n\n        <div className={styles.Buttons}>\n          <section>\n            <button className=\"outline\">\n              <span>Attach Thumbnail</span>\n            </button>\n\n            <button>\n              <span>Feature a Poet</span>\n            </button>\n\n            <button>\n              <span>Preview & Publish</span>\n            </button>\n          </section>\n          <section>\n            <a\n              className={styles.PostingAuthority}\n              onClick={this.toggleIdentity}\n            >\n              {this.state.isAnonymousPublish ? \"Anonymous\" : \"Libby Lebyane\"}\n            </a>\n            &mdash;\n            {/* When the user updates the poem draft */}\n            <BeatLoader></BeatLoader>\n            <span className={styles.SyncingStatus}>\n              Syncing to draft (<a>Delete</a>)\n            </span>\n          </section>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PoemPostInput;\n","import * as superagent from \"superagent\";\n\nexport const PoemService = {\n  // Gets poem data from the backend\n  getPoemData: (pId) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([process.env.REACT_APP_API_ENDPOINT, \"poems\", pId].join(\"/\"))\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  // Get the details of a poet\n  getPoemAuthors: (authorIds) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get(\n          [process.env.REACT_APP_API_ENDPOINT, \"authors\", authorIds].join(\"/\")\n        )\n        .end((_, response) => {\n          console.log(\"response\", response);\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  // Gets a list of poems suggested for as a feed\n  getUnauthenticatedFeed: () => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([process.env.REACT_APP_API_ENDPOINT, \"poems\", \"feed\"].join(\"/\"))\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n\n  updateDraft: (data, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([process.env.REACT_APP_API_ENDPOINT, \"drafts\"].join(\"/\"))\n        .send({ ...data })\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  getDraft: (did, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .get([process.env.REACT_APP_API_ENDPOINT, \"drafts\", did].join(\"/\"))\n        .set(\"Authorization\", token)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  uploadThumbnail: (file, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .put([process.env.REACT_APP_API_ENDPOINT, \"assets\", \"upload\"].join(\"/\"))\n        .set(\"Authorization\", token)\n        .attach(\"file\", file)\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  // Publishes a poem to the the community for reading\n  publish: (data, tags, token) => {\n    return new Promise((resolve, reject) => {\n      superagent\n        .post([process.env.REACT_APP_API_ENDPOINT, \"publish\", data.did].join(\"/\"))\n        .set(\"Authorization\", token)\n        .send({ tags: tags.split(\",\"), is_anonymous: data.is_anonymous })\n        .end((_, response) => {\n          PoemService.respond(response, resolve, reject);\n        });\n    });\n  },\n  respond: (response, resolve, reject) => {\n    if (response)\n      if (response.statusCode === 200) resolve(response.body.data);\n      else reject(response.body.reason || \"Something went wrong.\");\n    else reject(\"No internet connection. Please connect your device and try again.\");\n  },\n};\n","import React from \"react\";\nimport styles from \"./Poem.module.scss\";\nimport { Link } from \"react-router-dom\";\nimport { PoemService } from \"../../services/Poem\";\n\nconst Poem = ({ data, isDraft }) => {\n  const [poemAuthors, setPoemAuthors] = React.useState([]);\n  const reduceDescription = (description) => {\n    description = description.split(\" \");\n    if (description.length > 40) {\n      description = description.slice(0, 25);\n    }\n    return description.join(\" \") + \"...\";\n  }\n\n  React.useEffect(() => {\n    // Get information of the poet\n    if (data.author !== undefined) {\n      PoemService.getPoemAuthors([data.author, ...data.featured_poets])\n        .then((poets) => {\n          setPoemAuthors([...poemAuthors, ...poets]);\n        });\n    } else {\n      setPoemAuthors([isDraft ? { display_name: \"Myself\", username: \"me\" } : { display_name: \"Anonymous\", username: \"anonymous\" }])\n    }\n  }, [])\n\n  return (\n    <div className={styles.Poem} style={{ backgroundImage: `url(${data.thumbnail})` }}>\n      <div className={styles.PoemContents}>\n        <Link className={styles.PoemTitle} to={isDraft ? `/new_poem?draft_id=${data.did}` : `/poem/${data._id}`}>{data.title}</Link>\n        <span className={styles.PoemAuthor}>Written by <Link to={`/rebbels/@me`}>{poemAuthors.length ? poemAuthors[0].display_name : \"Loading...\"}</Link></span>\n\n        <span className={styles.PoemSnapshot}>{reduceDescription(data.description ? data.description : data.body)}</span>\n\n      </div>\n    </div>\n  )\n};\n\nexport default Poem;\n\n// <div className={styles.}></div>\n","import Poem from '../Poem/Poem';\nimport styles from './PoemsList.module.scss';\n\nconst PoemsList = ({ feed, isDrafts }) => {\n  return (<div className={styles.PoemsGrid}>\n    {feed.map((poem) => <Poem data={poem} isDraft={isDrafts}></Poem>)}\n  </div>)\n};\n\nexport default PoemsList;\n","export const Storage = {\n  set: (name, data) => {\n    return new Promise((resolve, reject) => {\n      try {\n        if (data && data.constructor !== String) {\n          if (data.constructor === Array || data.constructor === Object) {\n            data = JSON.stringify(data, null, 2);\n          } else {\n            data = data.toString();\n          }\n        }\n        localStorage.setItem(name, data);\n        resolve([name, data]);\n      } catch (error) {\n        console.error(error);\n        reject(\"Something went wrong while saving data\");\n      }\n    });\n  },\n\n  get: (name, isJSON = false) => {\n    return new Promise((resolve, reject) => {\n      try {\n        const data = localStorage.getItem(name);\n        if (isJSON) {\n          resolve(JSON.parse(data));\n        } else {\n          resolve(data);\n        }\n      } catch (error) {\n        console.error(error);\n        reject(error);\n      }\n    });\n  },\n\n  remove: (name) => {\n    return new Promise((resolve, reject) => {\n      try {\n        localStorage.removeItem(name);\n        resolve();\n      } catch(error) {\n        console.error(error);\n        reject(error);\n      }\n    });\n  }\n};\n","import React from \"react\";\nimport { Storage } from \"../services/Storage\";\n\n// Storage Context\nconst StorageContext = React.createContext({});\n\n// Storage Context Provider\nconst StorageContextProvider = ({ children }) => {\n  const [userToken, setUserToken] = React.useState(\n    localStorage.getItem(\"AUTH_TOKEN\")\n  );\n\n  return (\n    <StorageContext.Provider value={{ userToken, setUserToken }}>\n      {children}\n    </StorageContext.Provider>\n  );\n};\n\n// Storage Context Consumer\nconst useStorage = () => {\n  const context = React.useContext(StorageContext);\n  return context;\n};\n\nexport { StorageContextProvider, useStorage, StorageContext };\n","import React from 'react';\nimport styles from './Loader.module.scss';\n\nconst Loader = () => (\n  <div className={styles.Loader} data-testid=\"Loader\">\n    <svg width=\"84\" height=\"60\" viewBox=\"0 0 84 60\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path className={styles.FirstCircle} d=\"M0 30C0 13.4315 13.4315 0 30 0V0C46.5685 0 60 13.4315 60 30V30C60 46.5685 46.5685 60 30 60V60C13.4315 60 0 46.5685 0 30V30Z\"/>\n      <g className={styles.BlendGroup}>\n        <rect className={styles.SecondCircle} x=\"24\" width=\"60\" height=\"60\" rx=\"30\" fill=\"#1436AD\"/>\n      </g>\n    </svg>\n  </div>\n);\n\nexport default Loader;\n","import React from \"react\";\nimport Loader from \"../components/Loader/Loader\";\nimport { useSession } from \"../providers/SessionContext\";\n\n// Context\nconst LoaderContext = React.createContext({});\n\n// Context Provider\nconst LoaderContextProvider = ({ children }) => {\n  const [isLoaderVisible, setIsLoaderVisible] = React.useState(true);\n\n  return (\n    <LoaderContext.Provider value={{ isLoaderVisible, setIsLoaderVisible }}>\n      <div className=\"loader-container\" data-isvisible={isLoaderVisible}>\n        <Loader></Loader>\n      </div>\n      {children}\n    </LoaderContext.Provider>\n  );\n};\n\n// Consumer\nconst useLoaderState = () => {\n  const context = React.useContext(LoaderContext);\n  return context;\n};\n\nexport { LoaderContext, LoaderContextProvider, useLoaderState };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./Toast.module.scss\";\n\nconst Toast = ({ text, isShowClose, closeToast }) => (\n  <div className={styles.Toast} data-testid=\"Toast\">\n    <span>{text}</span>\n    {isShowClose && (\n      <div className={styles.CloseButton} onClick={closeToast}>\n        Close\n      </div>\n    )}\n  </div>\n);\n\nexport default Toast;\n","import React from \"react\";\nimport Toast from \"../components/Toast/Toast\";\n\n// Toast Context\nconst ToastContext = React.createContext({});\n\n// Toast Context Provider\nconst ToastContextProvider = ({ children }) => {\n  const [toastText, setToastText] = React.useState(null);\n  const [isShowClose, setIsShowClose] = React.useState(false);\n  const showToast = (text, duration = 3000) => {\n    setToastText(text);\n    if (duration > 3000) {\n      setIsShowClose(true);\n      setToastText(\"Showing close button\");\n    }\n    setTimeout(() => {\n      setToastText(null);\n      setIsShowClose(false);\n    }, duration);\n  };\n\n  return (\n    <ToastContext.Provider\n      value={{\n        showToast,\n        isShowClose,\n      }}\n    >\n      {children}\n      {toastText && (\n        <Toast\n          text={toastText}\n          isShowClose={isShowClose}\n          closeToast={() => setToastText(null)}\n        />\n      )}\n    </ToastContext.Provider>\n  );\n};\n\n// Toast Context Consumer\nconst useToast = () => {\n  const context = React.useContext(ToastContext);\n  return context;\n};\n\nexport { ToastContextProvider, useToast, ToastContext };\n","import React, { useContext, useEffect } from \"react\";\nimport PoemPostInput from \"../../components/PoemPostInput/PoemPostInput\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\nimport * as superagent from \"superagent\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport { PoemService } from \"../../services/Poem\";\n\nconst HomePage = () => {\n  const { userToken } = useStorage();\n  const { showToast } = useToast();\n  const { setIsLoaderVisible } = useLoaderState();\n\n  // All the poems in the feed\n  const [feed, setFeed] = React.useState([]);\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"Discover\"].join(\": \");\n\n    // Retrieve a feed listing from the backend\n    setIsLoaderVisible(true);\n    if (userToken) {\n      PoemService.getUnauthenticatedFeed()\n        .then((poems) => {\n          setIsLoaderVisible(false);\n          setFeed([...feed, ...poems]);\n        });\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      <div className=\"page-container\">\n        {/* An input for posting a new poem */}\n        {/* <PoemPostInput></PoemPostInput> */}\n\n        {/* Listed poems */}\n        <h1>Discover</h1>\n        <PoemsList feed={feed}></PoemsList>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default HomePage;\n","import React, { useEffect } from 'react';\nimport styles from './NotFoundPage.module.scss';\nimport { Link } from 'react-router-dom';\n\nconst NotFoundPage = () => {\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, 'Page Not Found'].join(': ')\n  }, []);\n  \n  return (<div className=\"page-container\" style={{transform: 'translateY(-100px)'}}>\n    <div className={styles.NotFoundPage} data-testid=\"NotFoundPage\">\n      <section>\n        <h1>Opps, for the one who's lost &mdash; this is a dead-end!</h1>\n        <p>You seem to have fallen off the wagon. Trace your way <Link to=\"/\">back to home.</Link></p>\n      </section>\n    </div>\n  </div>)\n};\n\nexport default NotFoundPage;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Poet.module.scss\";\n\nconst Poet = ({ poet }) => (\n  <a className={styles.Poet} href={[\"/rebbels/@\", poet.username].join(\"\")}>\n    <div\n      className={styles.PoetAvatar}\n      style={\n        {\n          // backgroundImage: `url(${poet.display_photo})`,\n        }\n      }\n    ></div>\n    <div className=\"PoetDetails\">\n      <b className={styles.PoetName}>{poet.display_name.split(\" \")[0]}</b>\n    </div>\n  </a>\n);\n\nexport default Poet;\n","import React, { useEffect } from \"react\";\nimport Poet from \"../../components/Poet/Poet\";\nimport styles from \"./PoetsPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useHistory } from \"react-router\";\nimport qs from \"qs\";\n\nconst PoetsPage = () => {\n  const [rebbels, setRebbels] = React.useState([]);\n  const [pages, setPages] = React.useState([]);\n  const { userSession } = useSession();\n\n  // React routing capabilities\n  const router = useHistory();\n\n  // To be able to toggle the loader\n  const { setIsLoaderVisible } = useLoaderState();\n\n  // Get query parameters to get the page index\n  const defaultParams = qs.parse(router.location.search, {\n    ignoreQueryPrefix: true,\n  });\n  const [queryParameters, setQueryParameters] = React.useState(defaultParams);\n\n  // For when an error occurs when retrieving the rebbels\n  const [responseError, setResponseError] = React.useState(\"\");\n\n  // Getting rebbel poets from the backend\n  const getRebbelPoets = React.useCallback(() => {\n    setIsLoaderVisible(true);\n    setResponseError(\"\");\n    superagent\n      .get(\n        [\n          process.env.REACT_APP_API_ENDPOINT,\n          \"rebbels?limit=10&start=\" + queryParameters.index,\n        ].join(\"/\")\n      )\n      .set(\"Authorization\", userSession ? userSession.token : undefined)\n      .end((_, response) => {\n        setIsLoaderVisible(false);\n        if (response) {\n          console.log(response.body);\n          if (response.statusCode === 200) {\n            setRebbels(response.body.data.rebbels);\n            // Rebuild the number of pages left\n            updatePagesCount(response.body.data.total_count);\n          } else {\n            setResponseError(\n              response.body.reason ||\n                \"An error has occurred while retrieving the poets from the server\"\n            );\n            updatePagesCount(1);\n          }\n        } else {\n          setResponseError(\n            \"An error has occurred while retrieving the poets from the server\"\n          );\n          updatePagesCount(1);\n        }\n      });\n  });\n\n  const updatePagesCount = (totalCount) => {\n    setPages([]);\n    const pIndexes = [];\n    for (let pIndex = 1; pIndex <= totalCount; pIndex++) {\n      pIndexes.push(pIndex);\n    }\n    setPages(pIndexes);\n  };\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"All Rebbel Poets\"].join(\n      \": \"\n    );\n\n    if (!queryParameters.index)\n      setQueryParameters({ ...queryParameters, index: 1 });\n    getRebbelPoets();\n  }, []);\n\n  return (\n    <div className=\"page-container\">\n      <div className=\"page-header\">\n        <span className=\"name\">All Rebbels</span>\n        <div className=\"flex-space\"></div>\n        <a href=\"/search?filter=by_rebbel\">\n          <span>Filter</span>\n        </a>\n      </div>\n\n      {/* Results retrieved from the backend retrieval */}\n      {!responseError && (\n        <div className={styles.Poets}>\n          {queryParameters.index === \"1\" && (\n            <Poet poet={{ display_name: \"Anonymous\", username: \"anonymous\" }} />\n          )}\n          {rebbels.map((poet) => (\n            <Poet poet={poet} key={poet._id} />\n          ))}\n        </div>\n      )}\n\n      {/* When an error has occured when retrieving the results */}\n      {responseError && (\n        <div>\n          <h2 style={{ textAlign: \"center\" }}>\n            {responseError} &mdash;{\" \"}\n            <a\n              style={{ fontSize: \"50px\", color: \"white\", userSelect: \"none\" }}\n              onClick={() => getRebbelPoets()}\n            >\n              Try this again.\n            </a>\n          </h2>\n        </div>\n      )}\n\n      {!!pages.length && (\n        <div className=\"more-pages\">\n          <div className=\"more-pages-title\">More Rebbels</div>\n          <div className=\"more-pages-links\">\n            {pages.map((pageNumber) => (\n              <a\n                href={[\"/rebbels?index=\", pageNumber].join(\"\")}\n                data-isactive={pageNumber.toString() === queryParameters.index}\n                key={pageNumber}\n              >\n                {pageNumber}\n              </a>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PoetsPage;\n","import React from \"react\";\nimport styles from \"./PoetProfile.module.scss\";\nimport { Link, useParams } from \"react-router-dom\";\nimport Poem from \"../../components/Poem/Poem\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport * as superagent from \"superagent\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\n\nconst PoetProfile = () => {\n  // Get the username of the profile being browsed\n  const params = useParams();\n\n  // Read from the the user session if any to check if there's a need to reach the server to get data\n  const { userSession } = useSession();\n  const { setIsLoaderVisible } = useLoaderState();\n  const [profileData, setProfileData] = React.useState(null);\n\n  // Contact the server to get the profile data from the backend.\n  const getProfileData = React.useCallback(() => {\n    return new Promise((resolve, reject) => {\n      if (userSession && userSession.username === params.poet) {\n      } else {\n        setIsLoaderVisible(true);\n\n        superagent\n          .get(\n            [process.env.REACT_APP_API_ENDPOINT, \"rebbels\", params.poet].join(\n              \"/\"\n            )\n          )\n          .end((_, response) => {\n            setIsLoaderVisible(false);\n            if (response) {\n              if (response.statusCode === 200) {\n                resolve(response.body.data);\n              }\n            }\n          });\n      }\n    });\n  });\n\n  React.useEffect(() => {\n    // document.title = process.env.REACT_APP_NAME + \": \" + name;\n    getProfileData().then((data) => {\n      setProfileData(data);\n      console.log(data);\n    });\n  }, []);\n\n  return (\n    profileData && (\n      <div className=\"page-container\">\n        <div className={styles.ProfilePage}>\n          <div className={styles.ProfileAvatarContainer}>\n            <div\n              className={styles.ProfileAvatar}\n              style={{\n                backgroundImage: `url(${profileData.display_photo})`,\n              }}\n            ></div>\n          </div>\n          <div className={styles.PageContents}>\n            <div className={styles.ProfileName}>\n              <span className={styles.Name}>\n                {profileData.display_name}{\" \"}\n                {userSession && userSession.username === profileData.username\n                  ? \"(Me)\"\n                  : \"\"}\n              </span>\n              <span className={styles.ProfleVerificationSign}></span>\n            </div>\n\n            <div className={styles.ProfileBiography}>\n              <span>{profileData.biography}</span>\n              {userSession && userSession.username === profileData.username ? (\n                profileData.biography.length !== 0 ? (\n                  <Link className={styles.ProfileBiographyEditButton}>\n                    Edit\n                  </Link>\n                ) : (\n                  <Link\n                    className={styles.ProfileBiographyEditButton}\n                    style={{ transform: \"translateX(-20px)\" }}\n                  >\n                    Add a biography\n                  </Link>\n                )\n              ) : (\n                \"\"\n              )}\n            </div>\n\n            <div className={styles.ProfileHeaderButtons}>\n              {userSession && userSession.username === profileData.username ? (\n                \"\"\n              ) : (\n                <button className=\"outline\">Follow Rebbel</button>\n              )}\n              {userSession && userSession.username === profileData.username ? (\n                <button className=\"outline\">Share your profile</button>\n              ) : (\n                <button className=\"outline\">Share Profile</button>\n              )}\n              {userSession && userSession.username === profileData.username ? (\n                \"\"\n              ) : (\n                <button className=\"outline\">Collaborate</button>\n              )}\n            </div>\n\n            <div className={styles.ProfileStats}>\n              <Link>\n                <b>{profileData.poems.length}</b> Poems Published\n              </Link>\n              <Link>\n                <b>{profileData.followers.length}</b> Followers\n              </Link>\n              <Link>\n                <b>{profileData.follows.length}</b> Follows\n              </Link>\n            </div>\n          </div>\n        </div>\n\n        {/* The contents of the profile */}\n        <div className={styles.PoetProfileContents}>\n          {profileData.poems.length ? (\n            profileData.poems.map((poemId) => <Poem poemId={poemId} />)\n          ) : (\n            <h1>{profileData.display_name} has not published any poems yet.</h1>\n          )}\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default PoetProfile;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./PoemPageHeader.module.scss\";\nimport { Link } from \"react-router-dom\";\nimport { PoemService } from \"../../services/Poem\";\n\nconst PoemPageHeader = ({ poemData }) => {\n  // Retrieve the authors in the poem from the backend\n  const [poemAuthors, setPoemAuthors] = React.useState([]);\n  React.useEffect(() => {\n    // Get information of the poets\n    if (poemData) {\n      if (poemData.author !== undefined) {\n        PoemService.getPoemAuthors([poemData.author, ...poemData.featured_poets])\n          .then((poets) => {\n            console.log(poets)\n            setPoemAuthors(poets);\n          });\n      } else {\n        setPoemAuthors([{ display_name: \"Anonymous\", username: \"anonymous\" }])\n      }\n    }\n  }, [poemData]);\n\n  return (\n    <>\n      <div className={styles.PoemPageHeader}>\n        <div className={styles.BackgroundDiffuser}>\n          <div className={styles.PoemInformationContainer}>\n            <div>\n              <div\n                className={styles.PoemThumbnailImage}\n                style={{\n                  backgroundImage:\n                    `url(${poemData.thumbnail})`,\n                }}\n              >\n                <div className={styles.PlayPauseButton}></div>\n              </div>\n            </div>\n            <div className={styles.PoemDetailsContainer}>\n              <h2 className={styles.PoemTitle}>{poemData?.title}</h2>\n              <div className={styles.PoemAuthor}>\n                Written by <Link to={`/rebbels/@${poemAuthors[0]?.username}`}>{poemAuthors[0]?.display_name}</Link>\n              </div>\n\n              <table className={styles.PoemMetadataItems}>\n                <tbody>\n                  <tr>\n                    <td>Read time</td>\n                    <td>\n                      <Link>{poemData?.read_time}</Link>\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Word count</td>\n                    <td>\n                      {poemData?.body?.split(\" \").length || 0} words\n                    </td>\n                  </tr>\n                  <tr>\n                    <td>Published on</td>\n                    <td>\n                      <Link>{poemData?.time_created?.day}</Link>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n\n              {/* Actions and stats of the poem */}\n            </div>\n\n            <div className={styles.PoemStats}>\n              <div></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PoemPageHeader;\n","import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport PoemPageHeader from \"../../components/PoemPageHeader/PoemPageHeader\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport styles from \"./PoemPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport { useLoaderState } from \"../../providers/LoaderContext\"\nimport { useToast } from \"../../providers/ToastContext\"\n\nconst PoemPage = () => {\n  const { setIsLoaderVisible } = useLoaderState();\n  const { showToast } = useLoaderState();\n\n  // Reference of the poem text container, to easily calculate annotation position\n  const poemTextContainer = React.useRef();\n  const scrollButtonsContainer = React.useRef();\n\n  // Opens an annotation box at the point of the clicked target\n  const [annotationPosition, setAnnotationPosition] = React.useState(0);\n  const annotationContainer = React.useRef();\n\n  const positionAnnotationContainer = (annotation, event) => {\n    const targetElement = event.target;\n    const targetRect = targetElement.getBoundingClientRect();\n    const textContainerRect = poemTextContainer.current.getBoundingClientRect();\n\n    let targetPosition = targetRect.y - textContainerRect.y;\n\n    // Set the contents of the annotations to the annotations container\n    annotationContainer.current.innerHTML = annotation;\n\n    // Check if the the annotation container exceeds the bottom of the poem to bring it back up\n    const annotationContainerRect =\n      annotationContainer.current.getBoundingClientRect();\n    const annotationTotalSpace =\n      targetPosition + annotationContainerRect.height;\n\n    if (textContainerRect.height - annotationTotalSpace < 0) {\n      targetPosition =\n        textContainerRect.height - annotationContainerRect.height;\n    }\n\n    setAnnotationPosition(targetPosition);\n    // Set the position of the annotation container\n    annotationContainer.current.style.transform = [\n      \"translateY(\",\n      targetPosition,\n      \"px)\",\n    ].join(\"\");\n  };\n\n  // Get the poem data when the page is opened\n  const params = useParams();\n  const [poemData, setPoemData] = React.useState({});\n  React.useEffect(() => {\n    setIsLoaderVisible(true);\n    superagent\n      .get([process.env.REACT_APP_API_ENDPOINT, \"poems\", params.poemId].join(\"/\"))\n      .end((_, response) => {\n        setIsLoaderVisible(false);\n\n        if (response) {\n          if (response.status === 200) {\n            setPoemData(response.body.data);\n            document.title = [process.env.REACT_APP_NAME, \": \", response.body.data.title].join(\"\");\n          } else {\n            showToast(response.body.reason || \"Something went wrong.\");\n            setPoemData(null);\n          }\n        } else {\n          showToast(\"You're not connected with the internet.\");\n          setPoemData(null);\n        }\n      });\n  }, []);\n\n  // Toggle the poem action buttons as sticky or absolute as page is being scrolled\n  React.useEffect(() => {\n    let windowScrollListener = window.addEventListener(\"scroll\", (event) => {\n      const scrollY = window.scrollY;\n\n      // Get the distance between the scroll and buttons container and if < 20 make buttons sticky\n      const poemContentRect = poemTextContainer.current.getBoundingClientRect();\n      const scrollDifference = poemContentRect.y - scrollY;\n      if (scrollDifference <= 0) {\n        scrollButtonsContainer.current.style.position = \"fixed\";\n        scrollButtonsContainer.current.style.top = \"200px\";\n      } else {\n        scrollButtonsContainer.current.style.position = \"absolute\";\n        scrollButtonsContainer.current.style.top = \"0px\";\n      }\n\n      if (scrollY > poemContentRect.bottom + 200) {\n        scrollButtonsContainer.current.style.opacity = 0;\n      } else {\n        scrollButtonsContainer.current.style.opacity = 1;\n      }\n    });\n\n    return () => window.removeEventListener(\"scroll\", windowScrollListener);\n  }, [poemData]);\n\n  return (\n    <>\n      <div className={styles.PoemPageContainer}>\n        <PoemPageHeader poemData={poemData}></PoemPageHeader>\n\n        <div className={styles.PoemContents}>\n          <div className={styles.PoemSplitSides}>\n            {/* The top of the poem text area */}\n            <div className={styles.SideButtons} ref={scrollButtonsContainer}>\n              <button title=\"Users currently reading this poem.\">\n                <IonIcon name=\"eye-outline\"></IonIcon>\n                <span className=\"count\">{poemData.views_count}</span>\n              </button>\n\n              <button className={styles.Bookmark}>\n                <IonIcon name=\"bookmark-outline\"></IonIcon>\n                <span className=\"count\">{poemData.bookmarks_count}</span>\n              </button>\n\n              <button className={styles.Heart}>\n                <IonIcon name=\"flame\"></IonIcon>\n                <span className=\"count\">{poemData.likes_count}</span>\n              </button>\n\n              <button className={styles.Share}>\n                <IonIcon name=\"share-outline\"></IonIcon>\n                <span className=\"count\">{poemData.shares_count}</span>\n              </button>\n            </div>\n\n            <div className={styles.PoemTextContainer} ref={poemTextContainer}>\n              {poemData.body}\n            </div>\n\n            {/* Annotations container */}\n            <div\n              className={styles.AnnotationsContainer}\n              style={{ translate: `translateY(${annotationPosition}px)` }}\n              ref={annotationContainer}\n            >\n              In rememberence of the late first Black President, Nelson Mandela.\n              This praise is meant to remind South Africans about the unity of\n              one.\n            </div>\n          </div>\n\n          {/* Tags that have been given to the poem */}\n          <div className={styles.PoemTags}>\n            <span>Tags</span>\n            <a href=\"#tag\" className=\"tag\">\n              African Struggle\n            </a>\n            <a href=\"#tag\" className=\"tag\">\n              Black\n            </a>\n            <a href=\"#tag\" className=\"tag\">\n              Apartheid\n            </a>\n            <a href=\"#tag\" className=\"tag\">\n              Wisdom\n            </a>\n          </div>\n\n          {/* Poem statistics and Author details */}\n          <div className={styles.RecommendedPoems}>\n            <h1>Discover More</h1>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default PoemPage;\n","import React, { useEffect } from \"react\";\nimport styles from \"./SearchPage.module.scss\";\nimport IonIcon from \"@reacticons/ionicons\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\nimport { useToast } from \"../../providers/ToastContext\";\n\nconst SearchPage = () => {\n  const [searchValue, setSearchValue] = React.useState(\"\");\n  const [results, setResults] = React.useState([]);\n  const { setIsLoaderVisible } = useLoaderState();\n  const { showToast } = useToast();\n\n  const getSearchResults = () => {\n    setIsLoaderVisible(true);\n    showToast(\"Oops. Could not connect.\");\n    setTimeout(() => setIsLoaderVisible(false), 5000);\n    setResults([]);\n  };\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"Search\"].join(\": \");\n  }, []);\n\n  return (\n    <>\n      <div className=\"page-container\">\n        <h1 className={styles.PageTitle}>Search</h1>\n        <div className={styles.SearchInputContainer}>\n          <input\n            className={styles.LargeSearchInput}\n            type=\"text\"\n            placeholder=\"Search for Rebel Poems / Poets\"\n            onKeyUp={(event) => setSearchValue(event.target.value)}\n          />\n          <div className={styles.SearchButton} onClick={getSearchResults}>\n            <IonIcon name=\"arrow-forward-sharp\"></IonIcon>\n          </div>\n        </div>\n\n        {results.length\n          ? true\n          : false && (\n              <>\n                <h4 style={{ textAlign: \"center\" }}>\n                  All results for \"{searchValue}\"\n                </h4>\n                <PoemsList></PoemsList>\n              </>\n            )}\n      </div>\n    </>\n  );\n};\n\nexport default SearchPage;\n","import React from \"react\";\nimport styles from \"./Footer.module.scss\";\nimport Logo from \"../../logo.svg\";\nimport { Link } from \"react-router-dom\";\n\nconst Footer = () => (\n  <>\n    <div className={styles.Footer}>\n      {/* RIGHT SECTION */}\n      <section className={styles.LeftSection}>\n        <img src={Logo} alt=\"\" />\n        <a className={styles.BrandName} href=\"/\">\n          {process.env.REACT_APP_NAME}\n        </a>\n\n        <div className={styles.Legal}>\n          All poems on this site are part of copyrights of their respective\n          poets. All content on this site is published here under{\" \"}\n          <a href=\"https://creativecommons.org/licenses/\" target=\"_blank\">\n            Creative Commons License\n          </a>\n          .\n        </div>\n      </section>\n\n      {/* FIRST MIDDLE SECTION */}\n      <section className={styles.FirstMiddleSection}>\n        <div className={styles.SectionName}>Navigation</div>\n\n        <Link to=\"/\">Top Ranked Poems</Link>\n        <Link to=\"/poets\">Top Rebel Poets</Link>\n        <Link to=\"/my_drafts\">View your Drafts</Link>\n        <Link to=\"/feeling_lucky\">I'm Feeling Lucky</Link>\n        <Link to=\"/search\">Search Poems</Link>\n      </section>\n\n      {/* SECOND MIDDLE SECTION */}\n      <section className={styles.SecondMiddleSection}>\n        <div className={styles.SectionName}>Poems</div>\n\n        <Link to=\"/\">All Poems</Link>\n        <Link to=\"/\">Poem By Language</Link>\n        <Link to=\"/\">Explore All Poets</Link>\n        <Link to=\"/\">Competitions</Link>\n      </section>\n\n      {/* RIGHT SECTION */}\n      <section className={styles.SecondMiddleSection}>\n        <div className={styles.SectionName}>General</div>\n\n        <Link to=\"/\">Donate</Link>\n        <Link to=\"/\">About Us</Link>\n        <Link to=\"/\">Licensing</Link>\n        <Link to=\"/\">Legal</Link>\n      </section>\n    </div>\n\n    <div className={styles.Attribution}>\n      Rebel Poets (Pty) Ltd. Copyright (c) 2020. All right reserved.\n    </div>\n  </>\n);\n\nexport default Footer;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./SignUpPage.module.scss\";\nimport * as superagent from \"superagent\";\nimport { Storage } from \"../../services/Storage\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nconst SignUpPage = () => {\n  const { setUserSession } = useSession();\n  const router = useHistory();\n\n  useEffect(() => {\n    document.title = [process.env.REACT_APP_NAME, \"Create an account\"].join(\n      \": \"\n    );\n  }, []);\n\n  const [requestData, setRequestData] = useState({\n    email_address: \"\",\n    display_name: \"\",\n    password: \"\",\n  });\n\n  // When an error occurs while trying to create an account\n  const [responseError, setResponseError] = useState(\"\");\n\n  const onInputKeyup = (event) => {\n    if (event.target.name) {\n      setRequestData({\n        ...requestData,\n        [event.target.name]: event.target.value,\n      });\n    }\n  };\n\n  const onFormSubmit = (event) => {\n    event.preventDefault();\n    // Reset the response error text\n    setResponseError(\"\");\n\n    // Make sure the user has entered important information to create the account\n    if (\n      requestData.email_address &&\n      requestData.display_name &&\n      requestData.password\n    ) {\n      // Send an account create request to the backend\n      superagent\n        .post([process.env.REACT_APP_API_ENDPOINT, \"rebbels\"].join(\"/\"))\n        .send(requestData)\n        .end((_, response) => {\n          if (response) {\n            if (response.statusCode === 200) {\n              Storage.set(\"AUTH_TOKEN\", response.body.data.token);\n              setUserSession(response.body.data);\n              router.push(\"/\");\n              // TODO: Show a welcome modal\n            } else {\n              // Means the account already exists\n              if (response.statusCode === 208) {\n                setResponseError(\n                  `Account with that email address already exists. Please sign in if this is your account.`\n                );\n              }\n            }\n          } else {\n            setResponseError(\n              \"You are not connected to the internet. Please check your connection and try again.\"\n            );\n          }\n        });\n    } else {\n      // Let the user know the form is incomplete\n      setResponseError(\n        \"All fields are mandatory, please make sure you fill every field to create an account.\"\n      );\n    }\n  };\n\n  return (\n    <>\n      <div className=\"page-container\">\n        <form onSubmit={onFormSubmit} className=\"form\">\n          <h1>Join Rebbels</h1>\n\n          {responseError ? (\n            <p className={[styles.ResponseError, \"danger\"].join(\" \")}>\n              {\" \"}\n              <b>{responseError}</b>{\" \"}\n            </p>\n          ) : (\n            \"\"\n          )}\n\n          <input\n            type=\"text\"\n            placeholder=\"Email address\"\n            name=\"email_address\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Your name\"\n            name=\"display_name\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Enter a password\"\n            name=\"password\"\n            onKeyUp={onInputKeyup}\n          />\n          <button type=\"submit\">Become a Member</button>\n\n          <p>\n            We are glad to have you onboard, by creating an account you agree to\n            our <Link to=\"\">Terms and Conditions</Link>. If you are already a\n            member you can <Link to=\"/sign_in\">Sign in to your account.</Link>\n          </p>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default SignUpPage;\n","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport * as superagent from \"superagent\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { Storage } from \"../../services/Storage\";\n\nconst SignInPage = () => {\n  // Response error\n  const [responseError, setResponseError] = React.useState(\"\");\n  const { setUserSession } = useSession();\n  const { setUserToken } = useStorage();\n  const [signInData, setSignInData] = React.useState({\n    username: \"\",\n    password: \"\",\n  });\n  const router = useHistory();\n\n  const onInputKeyup = (event) => {\n    if (event.target.name) {\n      setSignInData({ ...signInData, [event.target.name]: event.target.value });\n    }\n  };\n\n  // Form submit\n  const onFormSubmit = (event) => {\n    event.preventDefault();\n\n    setResponseError(\"\");\n    // Turn the credentials into Basic authentication\n    if (signInData.username && signInData.password) {\n      const credentialsData = [\n        \"Basic\",\n        btoa([signInData.username, signInData.password].join(\":\")),\n      ].join(\" \");\n\n      // Send the authentication request\n      superagent\n        .get(\n          [process.env.REACT_APP_API_ENDPOINT, \"rebbels/authentication\"].join(\n            \"/\"\n          )\n        )\n        .set(\"Authorization\", credentialsData)\n        .end((_, response) => {\n          if (response) {\n            alert(response.statusCode);\n            if (response.statusCode === 200) {\n              // Set the token to be saved\n              Storage.set(\"AUTH_TOKEN\", response.body.data.token);\n              setUserSession(response.body.data);\n              setUserToken(response.body.data.token);\n              router.push(\"/\");\n            } else {\n              setResponseError(\n                response.body.reason ||\n                  \"Something went wrong. Please try again, contact us if error persists.\"\n              );\n            }\n          } else {\n            // TODO: Show a modal error\n            setResponseError(\n              \"No internet, please check your connection and try again.\"\n            );\n          }\n        });\n    } else {\n      setResponseError(\n        \"All fields are required. Please make sure they are all filled.\"\n      );\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"page-container\">\n        <form action=\"\" className=\"form\" onSubmit={onFormSubmit}>\n          <h1>Login</h1>\n          {responseError && <p className=\"danger\">{responseError}</p>}\n          <input\n            type=\"text\"\n            placeholder=\"Your email or username\"\n            name=\"username\"\n            onKeyUp={onInputKeyup}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            name=\"password\"\n            onKeyUp={onInputKeyup}\n          />\n\n          <button>Sign In to your Account</button>\n\n          <p>\n            By signing in you agree to out{\" \"}\n            <Link to=\"\">Terms and Conditions</Link>. If you don't have an\n            account you can <Link to=\"/sign_up\">create one here.</Link>\n          </p>\n        </form>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default SignInPage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './DraftsPage.module.scss';\nimport * as superagent from 'superagent';\nimport { useStorage } from '../../providers/StorageContext';\nimport { useToast } from \"../../providers/ToastContext\";\nimport PoemsList from \"../../components/PoemsList/PoemsList\";\n\nconst DraftsPage = () => {\n  const [drafts, setDrafts] = React.useState([]);\n  const { showToast } = useToast();\n  const storage = useStorage();\n\n  // Retrieve the drafts from the backend\n  React.useEffect(() => {\n    superagent\n      .get([process.env.REACT_APP_API_ENDPOINT, \"drafts\"].join(\"/\"))\n      .set(\"Authorization\", storage.userToken)\n      .end((_, response) => {\n        if (response) {\n          if (response.status === 200) {\n            setDrafts(response.body.data);\n          } else {\n            showToast(response.reason || \"Something went wrong.\");\n          }\n        } else {\n          showToast(\"You are not connected to the internet.\");\n          setDrafts(null);\n        }\n      });\n  }, []);\n\n  return (\n    <div className=\"page-container\" data-testid=\"DraftsPage\">\n      {\n        drafts === null &&\n        <div>\n          <section>\n            <h1>Something happened while retrieving your drafts.</h1>\n            <p>If this error persists, please contact us and let us know about the issue.</p>\n          </section>\n        </div>\n      }\n      {\n        drafts !== null &&\n        <div>\n          <h1>All Your Drafts</h1>\n          <PoemsList feed={drafts} isDrafts={true}/>\n            </div>\n      }\n    </div>\n          )\n};\n\n          export default DraftsPage;\n","import React from 'react';\nimport { useHistory } from 'react-router';\nimport { useToast } from \"../../providers/ToastContext\";\nimport Loader from \"../../components/Loader/Loader\";\nimport styles from './FeelingLuckyPage.module.scss';\nimport * as superagent from 'superagent';\n\nconst FeelingLuckyPage = () => {\n  const history = useHistory();\n  const { showToast } = useToast();\n  const [isError, setIsError] = React.useState(false);\n\n  // Reach the server to get a random poem\n  React.useEffect(() => {\n    superagent\n      .get([process.env.REACT_APP_API_ENDPOINT, \"poems\", \"feeling_lucky\"].join(\"/\"))\n      .end((_, response) => {\n        if (response) {\n          if (response.status === 200) {\n            // Route to a poem page to show the random poem\n            history.push([\"/poem\", response.body.data[\"_id\"]].join(\"/\"));\n          } else {\n            showToast(response.body.reason || \"Something went wrong.\");\n            setIsError(true);\n          }\n        } else {\n          showToast(\"You're are not connected to the internet.\");\n          setIsError(true);\n        }\n      });\n  }, []);\n\n  return (\n    <div className=\"page-container\">\n      {isError && <div>\n        <section>\n          <h1>Something happened while retrieving a random poem.</h1>\n          <p>If this error persists, please contact us and let us know about the issue.</p>\n        </section>\n      </div>\n      }\n\n      {!isError && <div>\n        <section style={{ textAlign: 'center' }}>\n          <h1 style={{ marginBottom: \"20px\" }}>Let's spoil up!</h1>\n          <Loader></Loader>\n        </section>\n      </div>}\n    </div>\n  )\n};\n\nexport default FeelingLuckyPage;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"./RootWrapper.module.scss\";\nimport { useSession } from \"../../providers/SessionContext\";\nimport { useHistory } from \"react-router-dom\";\nimport * as superagent from \"superagent\";\nimport { Storage } from \"../../services/Storage\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\n\nconst RootWrapper = ({ children }) => {\n  const { setUserSession } = useSession();\n  const { setIsLoaderVisible } = useLoaderState();\n  const router = useHistory();\n  const { userToken } = useStorage();\n\n  // On App startup, request the data of the user from the backend\n  React.useEffect(() => {\n    // Check if there is a session token available\n    if (userToken) {\n      // Send a get data request to the backend\n      superagent\n        .get(\n          [\n            process.env.REACT_APP_API_ENDPOINT,\n            \"rebbels\",\n            \"reauthenticate\",\n          ].join(\"/\")\n        )\n        .set(\"Authorization\", userToken)\n        .end((_, response) => {\n          // At first the loader will be shown for the page to fully load, hide it after page has fully loaded\n          setIsLoaderVisible(false);\n\n          if (response) {\n            if (response.statusCode === 200) {\n              setUserSession(response.body.data);\n            } else {\n              if (response.statusCode === 404) {\n                console.log(\"Not found.\");\n              } else if (response.statusCode === 403) {\n                console.log(\"Unauthorized.\");\n              } else if (response.statusCode === 510) {\n                console.log(\"Session expired.\");\n              } else {\n                console.log(\"Something went wrong.\");\n              }\n\n              // Remove the session token from the storage\n              Storage.remove(\"AUTH_TOKEN\");\n\n              console.log(\"Restart.\");\n              // Take the user to a user sign in page to re-authenticate them\n              router.push(\"/sign_in\");\n            }\n          } else {\n            // TODO: Show a toast error\n          }\n        });\n    }\n  }, []);\n\n  return <>{children}</>;\n};\n\nexport default RootWrapper;\n","import React from \"react\";\nimport styles from \"./DraftPreview.module.scss\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { PoemService } from \"../../services/Poem\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\n\nconst DraftPreview = ({ data, token, isPublished }) => {\n  const { userToken } = useStorage();\n  const { isLoaderVisible, setIsLoaderVisible } = useLoaderState()\n\n  const [draftContainerWidth, setDraftPreviewContainer] = React.useState(0);\n  const tagsInput = React.createRef();\n\n  const publishDraft = () => {\n    setIsLoaderVisible(true)\n    PoemService.publish(data, tagsInput.current.value, userToken)\n      .then((poemId) => {\n        setIsLoaderVisible(false);\n        isPublished(poemId.toUpperCase());\n      })\n  }\n\n  React.useState(() => {\n    // Change the width of the bottom buttons when the width changes\n    const windowResizeListener = window.addEventListener(\"resize\", () => {\n      const draftContainer = document.getElementById(\"draft-container\");\n      if (draftContainer)\n        setDraftPreviewContainer(draftContainer.innerWidth)\n      console.log(draftContainer)\n    });\n  }, []);\n\n  return (\n    <div className={styles.DraftPreview} id=\"draft-container\">\n      <div className={styles.DraftTitle}>\n        {data.title || \"No title entered yet.\"} (preview)\n      </div>\n\n      <div className={styles.DraftSplitSides}>\n        <div className={styles.DraftContents}>\n          <ReactMarkdown children={data.body} plugins={[remarkGfm]}></ReactMarkdown>\n        </div>\n        <div className={styles.DraftAnnotations}>\n          Click on an annotation to read it's description\n        </div>\n      </div>\n\n      <div className={styles.BottomButtons}>\n        {/* The input for adding tags of the poem*/}\n        <input placeholder=\"Comma seperated Tags, eg. Love, Teenagers, Fun\" ref={tagsInput} />\n\n        <button disabled={isLoaderVisible} className=\"primary\" onClick={publishDraft}>Publish Poem</button>\n      </div>\n    </div>\n  )\n};\n\nexport default DraftPreview;\n","import IonIcon from \"@reacticons/ionicons\";\nimport React from \"react\";\nimport styles from \"./NewPoem.module.scss\";\nimport ReactModal from \"react-modal\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { nanoid } from \"nanoid\";\nimport qs from \"qs\";\nimport { PoemService } from \"../../services/Poem\";\nimport { useLoaderState } from \"../../providers/LoaderContext\";\nimport { useStorage } from \"../../providers/StorageContext\";\nimport { useToast } from \"../../providers/ToastContext\";\nimport DraftPreview from \"../../components/DraftPreview/DraftPreview\";\n\nfunction NewPoem() {\n  const { userToken } = useStorage();\n  const { setIsLoaderVisible } = useLoaderState();\n  const { showToast } = useToast();\n  const [isPreviewOpen, setIsPreviewOpen] = React.useState(false);\n  const router = useHistory();\n\n  const [draftData, setDraftData] = React.useState({\n    did: \"\",\n    title: \"\",\n    body: \"\",\n    thumbnail: \"\",\n    tags: [],\n    featured_poets: [],\n    is_anonymous: false,\n    time_created: new Date().toISOString(),\n    is_created: false,\n  });\n  const [changeInterval, setChangeInterval] = React.useState(null);\n\n  React.useState(() => {\n    document.title = [process.env.REACT_APP_NAME, \"New Poem\"].join(\": \");\n\n    // From the location of the page, determine the draft id or create a new one\n    const params = qs.parse(router.location.search, {\n      ignoreQueryPrefix: true,\n    });\n    const did = nanoid().toUpperCase();\n\n    if (params.draft_id) {\n      setDraftData({ ...draftData, did: params.draft_id });\n      PoemService.getDraft(params.draft_id, userToken)\n        .then((draft) => {\n          console.log(\"Found draft:\", draft);\n          // Reload the draft data from the recovered draft\n          setDraftData({\n            did: params.draft_id,\n            thumbnail: draft.thumbnail,\n            title: draft.title,\n            body: draft.body,\n            featured_poets: draft.featured_poets,\n            time_created: draft.time_created.toString(),\n            is_anonymous: draft.is_anonymous,\n            is_created: true,\n          });\n        })\n        .catch((error) => console.log(error));\n    } else {\n      setDraftData({ ...draftData, did });\n      router.push([router.location.pathname, \"?draft_id=\", did].join(\"\"));\n    }\n  }, []);\n\n  // When a field in the poem changes be sure to sync that change with the draft\n  const onFieldChange = (ev) => {\n    const changes = { name: ev.target.name, value: ev.target.value };\n    setDraftData({ ...draftData, [changes.name]: changes.value });\n\n    // TODO: Change only on an interval.\n  };\n\n  // When the user needs to select image files\n  const imageInputRef = React.useRef();\n  const onImageSelect = () => {\n    // Preview the file on the poem page then upload the image in the background\n    if (imageInputRef.current.files.length) {\n      const fileReader = new FileReader();\n      fileReader.onloadend = () =>\n        setDraftData({ ...draftData, thumbnail: fileReader.result });\n      fileReader.readAsDataURL(imageInputRef.current.files[0]);\n\n      // Upload the file to the backend server\n      PoemService.uploadThumbnail(\n        imageInputRef.current.files[0],\n        userToken\n      ).then((data) => {\n        setDraftData({ ...draftData, thumbnail: data.large });\n        PoemService.updateDraft(draftData, userToken);\n      });\n    }\n  };\n\n  // To be able to get rid of the change interval listener/timer use an effect clean up\n  React.useEffect(() => { }, []);\n\n  return (\n    <div className={styles.PageContainer}>\n      {/* When the preview and publish button is pressed */}\n      <ReactModal\n        isOpen={isPreviewOpen}\n        onRequestClose={() => setIsPreviewOpen(false)}\n        style={{\n          overlay: { zIndex: 60000 },\n          content: {\n            width: \"50%\",\n            margin: \"auto\",\n            borderRadius: \"0px\",\n            border: \"3px solid black\",\n          },\n        }}\n      >\n        <DraftPreview\n          data={draftData}\n          isPublished={(poemId) => {\n            setIsPreviewOpen(false);\n            router.push([\"/poem/\", poemId].join(\"\"));\n          }}\n          token={userToken}\n        ></DraftPreview>\n      </ReactModal>\n\n      {/* New poem header element */}\n      <div\n        className={styles.NewPoemHeaderContainer}\n        style={{\n          backgroundImage: `url(${draftData.thumbnail})`,\n        }}\n      >\n        <div className={styles.NewPoemImageContainer}>\n          <input\n            type=\"file\"\n            ref={imageInputRef}\n            onChange={onImageSelect}\n            accept=\"image/png, image/jpg, image/jpeg, image/gif, image/webp, image/bmp\"\n            hidden\n          />\n          <div\n            className={styles.NewPoemImageSelector}\n            onClick={() => imageInputRef.current.click()}\n            style={{\n              backgroundImage: `url(${draftData.thumbnail})`,\n            }}\n          >\n            <IonIcon name=\"add-sharp\"></IonIcon>\n          </div>\n        </div>\n        <div className={styles.NewPoemDetails}>\n          <textarea\n            className={styles.NewPoemTitle}\n            autoFocus={true}\n            name=\"title\"\n            rows={draftData.title.split(\"\\n\").length}\n            onChange={onFieldChange}\n            value={draftData.title}\n            placeholder=\"Poem title\"\n          ></textarea>\n\n          <span>\n            Currently syncing edits to{\" \"}\n            <a href=\"/your_drafts\" target=\"_blank\" referrerPolicy=\"no-referrer\">\n              Draft ({draftData.did})\n            </a>\n            .\n          </span>\n          <table className={styles.PoemMetadataItems}>\n            <tbody>\n              <tr>\n                <td>Written by</td>\n                <td>\n                  <span className=\"link\"\n                    onClick={() =>\n                      setDraftData({\n                        ...draftData,\n                        is_anonymous: !draftData.is_anonymous,\n                      })\n                    }\n                  >\n                    {draftData.is_anonymous ? \"Anonymous\" : \"Yourself\"}\n                  </span>\n                </td>\n              </tr>\n              <tr>\n                <td>Features</td>\n                <td>\n                  <Link>Add a rebbel</Link>\n                </td>\n              </tr>\n              <tr>\n                <td>Created on</td>\n                <td>\n                  <Link>{draftData.time_created}</Link>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n\n          <br />\n          <div className=\"flex\">\n            <button\n              onClick={() => {\n                setIsLoaderVisible(true);\n                PoemService.updateDraft(draftData, userToken)\n                  .then(() => {\n                    showToast(\"Draft saved.\");\n                    setIsLoaderVisible(false);\n                  })\n                  .catch(() => setIsLoaderVisible(false));\n              }}\n            >\n              Save Draft\n            </button>\n            <button className=\"outline\" onClick={() => {\n              setIsLoaderVisible(true);\n              PoemService.updateDraft(draftData, userToken)\n                .then(() => {\n                  setIsLoaderVisible(false);\n                  setIsPreviewOpen(true);\n                }).catch((error) => {\n                  console.log(\"Error something went wrong.\");\n                  setIsLoaderVisible(false);\n                })\n            }}>\n              Preview and Publish\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* The poem contents */}\n      <div className={styles.NewPoemContentsContainer}>\n        <textarea\n          placeholder=\"Type your poem body here...\"\n          rows={draftData.body.split(\"\\n\").length}\n          name=\"body\"\n          onChange={onFieldChange}\n          value={draftData.body}\n        ></textarea>\n      </div>\n    </div>\n  );\n}\n\nexport default NewPoem;\n","import React from \"react\";\nimport Header from \"./components/Header/Header\";\nimport { BrowserRouter, Route, Switch, Redirect } from \"react-router-dom\";\n\n// Pages\nimport HomePage from \"./pages/HomePage/HomePage\";\nimport NotFoundPage from \"./pages/NotFoundPage/NotFoundPage\";\nimport PoetsPage from \"./pages/PoetsPage/PoetsPage\";\nimport PoetProfile from \"./pages/PoetProfile/PoetProfile\";\nimport PoemPage from \"./pages/PoemPage/PoemPage\";\nimport SearchPage from \"./pages/SearchPage/SearchPage\";\nimport Footer from \"./components/Footer/Footer\";\nimport SignUpPage from \"./pages/SignUpPage/SignUpPage\";\nimport SignInPage from \"./pages/SignInPage/SignInPage\";\nimport DraftsPage from \"./pages/DraftsPage/DraftsPage\";\nimport FeelingLuckyPage from \"./pages/FeelingLuckyPage/FeelingLuckyPage\";\nimport RootWrapper from \"./components/RootWrapper/RootWrapper\";\n\n// Providers\nimport { SessionContextProvider, useSession } from \"./providers/SessionContext\";\nimport { StorageContextProvider } from \"./providers/StorageContext\";\nimport { BacklightContextProvider } from \"./providers/BacklightContext\";\n\nimport { LoaderContextProvider } from \"./providers/LoaderContext\";\nimport NewPoem from \"./pages/NewPoem/NewPoem\";\nimport { ToastContextProvider } from \"./providers/ToastContext\";\n\nfunction App() {\n  const { userSession } = useSession();\n\n  return (\n    <React.Fragment>\n      <ToastContextProvider>\n        <StorageContextProvider>\n          <SessionContextProvider>\n            <BacklightContextProvider>\n              <LoaderContextProvider>\n                <BrowserRouter>\n                  <RootWrapper>\n                    <Header />\n                    <Switch>\n                      <Route path=\"/new_poem\">\n                        <NewPoem userSession={userSession} />\n                      </Route>\n                      <Route exact path=\"/\">\n                        <Redirect to=\"/discover\"></Redirect>\n                      </Route>\n                      <Route path=\"/discover\">\n                        <HomePage />\n                      </Route>\n                      <Route exact path=\"/rebbels\">\n                        <PoetsPage />\n                      </Route>\n                      <Route path=\"/rebbels/@:poet\">\n                        <PoetProfile />\n                      </Route>\n                      <Route path=\"/your_drafts\">\n                        <DraftsPage />\n                      </Route>\n                      <Route path=\"/feeling_lucky\">\n                        <FeelingLuckyPage />\n                      </Route>\n                      <Route path=\"/poem/:poemId\">\n                        <PoemPage />\n                      </Route>\n                      <Route path=\"/search\">\n                        <SearchPage />\n                      </Route>\n                      <Route path=\"/sign_up\">\n                        <SignUpPage />\n                      </Route>\n                      <Route path=\"/sign_in\">\n                        <SignInPage></SignInPage>\n                      </Route>\n                      <Route path=\"*\">\n                        <NotFoundPage />\n                      </Route>\n                    </Switch>\n                    <Footer />\n                  </RootWrapper>\n                </BrowserRouter>\n              </LoaderContextProvider>\n            </BacklightContextProvider>\n          </SessionContextProvider>\n        </StorageContextProvider>\n      </ToastContextProvider>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ProfilePage\":\"PoetProfile_ProfilePage__3EHfO\",\"PageContents\":\"PoetProfile_PageContents__r-u8b\",\"ProfileAvatar\":\"PoetProfile_ProfileAvatar__2wH_s\",\"ProfileName\":\"PoetProfile_ProfileName__pBmrO\",\"Name\":\"PoetProfile_Name__3iNLf\",\"ProfileBiography\":\"PoetProfile_ProfileBiography__2A4pG\",\"ProfileHeaderButtons\":\"PoetProfile_ProfileHeaderButtons__dhG6E\",\"ProfileStats\":\"PoetProfile_ProfileStats__3S3gE\",\"PoetProfileContents\":\"PoetProfile_PoetProfileContents__J1aos\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemPageContainer\":\"PoemPage_PoemPageContainer__1CarM\",\"PoemContents\":\"PoemPage_PoemContents__371ti\",\"PoemSplitSides\":\"PoemPage_PoemSplitSides__3WBGw\",\"PoemTextContainer\":\"PoemPage_PoemTextContainer__1JETF\",\"AnnotationsContainer\":\"PoemPage_AnnotationsContainer__Fzloh\",\"SideButtons\":\"PoemPage_SideButtons__ugz1G\",\"Eye\":\"PoemPage_Eye__3WqdT\",\"Heart\":\"PoemPage_Heart__CcMDg\",\"Bookmark\":\"PoemPage_Bookmark__2Sv34\",\"PoemInformation\":\"PoemPage_PoemInformation__dnvQ3\",\"PoemTags\":\"PoemPage_PoemTags__dFrKg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Footer\":\"Footer_Footer__37hEc\",\"BrandName\":\"Footer_BrandName__3Ln1q\",\"Legal\":\"Footer_Legal__1pCYr\",\"LeftSection\":\"Footer_LeftSection__cesUv\",\"SectionName\":\"Footer_SectionName__21QzB\",\"Attribution\":\"Footer_Attribution__12EnI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemPageHeader\":\"PoemPageHeader_PoemPageHeader__1YcZt\",\"BackgroundDiffuser\":\"PoemPageHeader_BackgroundDiffuser__1lEzy\",\"PoemInformationContainer\":\"PoemPageHeader_PoemInformationContainer__2l3Cz\",\"PoemThumbnailImage\":\"PoemPageHeader_PoemThumbnailImage__ne5WI\",\"PoemDetailsContainer\":\"PoemPageHeader_PoemDetailsContainer__10FpI\",\"PoemTitle\":\"PoemPageHeader_PoemTitle__29a6A\",\"PoemDescription\":\"PoemPageHeader_PoemDescription__1S9Wg\",\"PoemMetadataItems\":\"PoemPageHeader_PoemMetadataItems__1Vaym\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NewPoemHeaderContainer\":\"NewPoem_NewPoemHeaderContainer__t4L9L\",\"link\":\"NewPoem_link__1Bamm\",\"NewPoemImageSelector\":\"NewPoem_NewPoemImageSelector__2Gq2Z\",\"NewPoemDetails\":\"NewPoem_NewPoemDetails__Kwqin\",\"NewPoemTitle\":\"NewPoem_NewPoemTitle__pxTax\",\"NewPoemContentsContainer\":\"NewPoem_NewPoemContentsContainer__1ebla\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemInputContainer\":\"PoemPostInput_PoemInputContainer__1qw88\",\"PoemInputTitle\":\"PoemPostInput_PoemInputTitle__2oLmn\",\"PoemInput\":\"PoemPostInput_PoemInput__3YoN7\",\"PoemTagsInput\":\"PoemPostInput_PoemTagsInput__26EWh\",\"Buttons\":\"PoemPostInput_Buttons__3AFZM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DraftPreview\":\"DraftPreview_DraftPreview__yNm0A\",\"DraftTitle\":\"DraftPreview_DraftTitle__3RCXC\",\"DraftSplitSides\":\"DraftPreview_DraftSplitSides__1j1y-\",\"DraftContents\":\"DraftPreview_DraftContents__1rRku\",\"DraftAnnotations\":\"DraftPreview_DraftAnnotations__1vh4N\",\"BottomButtons\":\"DraftPreview_BottomButtons__19wR1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poem\":\"Poem_Poem__LY0gH\",\"PoemContents\":\"Poem_PoemContents__17jo4\",\"PoemTitle\":\"Poem_PoemTitle__12qQa\",\"PoemAuthor\":\"Poem_PoemAuthor__3PQCX\",\"PoemSnapshot\":\"Poem_PoemSnapshot__1Ggzi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"Header_flex__1xcfe\",\"space-between\":\"Header_space-between__u85w8\",\"flex-space\":\"Header_flex-space__ye-2W\",\"clickable\":\"Header_clickable__191kM\",\"Banner\":\"Header_Banner__1GWR_\",\"HeaderContainer\":\"Header_HeaderContainer__F-Ur3\",\"Header\":\"Header_Header__2C_Ub\",\"HeaderBrandLogo\":\"Header_HeaderBrandLogo__2PZZA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__3w7V8\",\"FirstCircle\":\"Loader_FirstCircle__1fzNt\",\"FirstCircleBlink\":\"Loader_FirstCircleBlink__1qLd-\",\"SecondCircle\":\"Loader_SecondCircle__YfdMW\",\"SecondCircleBlink\":\"Loader_SecondCircleBlink__1a2nU\",\"BlendGroup\":\"Loader_BlendGroup__1AEZI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PageTitle\":\"SearchPage_PageTitle__3czwG\",\"SearchInputContainer\":\"SearchPage_SearchInputContainer__1ixej\",\"LargeSearchInput\":\"SearchPage_LargeSearchInput__2nEZh\",\"SearchButton\":\"SearchPage_SearchButton__3x0_t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poet\":\"Poet_Poet__1iqH7\",\"PoetAvatar\":\"Poet_PoetAvatar__Qvcdq\",\"PoetName\":\"Poet_PoetName__1MMec\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Toast\":\"Toast_Toast__1az6l\",\"CloseButton\":\"Toast_CloseButton__Gj3ID\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PoemsGrid\":\"PoemsList_PoemsGrid__DvbAG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"NotFoundPage\":\"NotFoundPage_NotFoundPage__2pL1I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Poets\":\"PoetsPage_Poets__39bvA\"};"],"sourceRoot":""}